{% extends 'ambiental/base.html' %}
{% load staticfiles %}

{% block content_block %}
<script type="text/javascript" >
$(function() {
    Highcharts.chart('cd-05', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Project Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ progress }}
        }, {
          name: 'Not-Done',
          y: {{ missing }}
        }]
      }]
    });
  });
$(function() {
    Highcharts.chart('cd-0', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Critical Decision Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ a }}
        }, {
          name: 'Not-Done',
          y: 300 - {{ a }}
        }]
      }]
    });
  });
$(function() {
    Highcharts.chart('cd-1', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Critical Decision Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ b }}
        }, {
          name: 'Not-Done',
          y: 600 - {{ b }}
        }]
      }]
    });
  });
$(function() {
    Highcharts.chart('cd-2', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Critical Decision Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ c }}
        }, {
          name: 'Not-Done',
          y: 900 - {{ c }}
        }]
      }]
    });
  });
$(function() {
    Highcharts.chart('cd-3', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Critical Decision Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ d }}
        }, {
          name: 'Not-Done',
          y: 1000 - {{ d }}
        }]
      }]
    });
  });
$(function() {
    Highcharts.chart('project', {
      chart: {
        plotBackgroundColor: null,
        plotBorderWidth: null,
        plotShadow: false,
        type: 'pie'
      },
      title: {
        text: 'Project Progress'
      },
      plotOptions: {
        pie: {
          allowPointSelect: true,
          cursor: 'pointer',
          dataLabels: {
            enabled: true,
            format: '<b>{point.name}</b>: {point.percentage:.1f} %',
            style: {
              color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
            }
          }
        }
      },
      series: [{
        name: 'Progress',
        colorByPoint: true,
        data: [{
          name: 'Done',
          y: {{ progress }}
        }, {
          name: 'Not-Done',
          y: {{ missing }}
        }]
      }]
    });
  });
</script>
<script src="{% static 'ambiental/highcharts/code/highcharts.js' %}"></script>
<div class="container-fluid">
  <div class="jumbotron">
  {% if object %}
  <h3 class="display-4 center">{{ object.name }}</h3>
  <p>{{ object.description }}</p>
  <a class="btn btn-primary" href="{% url 'final-report' project.slug %}">Final Report</a>
  <div  id="project" style="min-width: 550px; height:300px; max-width:650px; margin: 0 auto" data-highcharts-chart="0"></div>
  <br>
  <table class="table table-striped table-bordered" >
    <tbody>
      {% for critical in cd %}
      <td>
      <h5>{{ critical }}</h5>
      <ul>
        {% if critical.name == 'CD-0' %}
        <div  id="cd-0" style="min-width: 300px; height:220px; max-width:300px; margin: 0 auto" data-highcharts-chart="0"></div>
        <br>
        {% endif %}
        {% if critical.name == 'CD-1' %}
        <div  id="cd-1" style="min-width: 300px; height:220px; max-width:300px; margin: 0 auto" data-highcharts-chart="0"></div>
        <br>
        {% endif %}
        {% if critical.name == 'CD-2' %}
        <div  id="cd-2" style="min-width: 300px; height:220px; max-width:300px; margin: 0 auto" data-highcharts-chart="0"></div>
        <br>
        {% endif %}
        {% if critical.name == 'CD-3' %}
        <div  id="cd-3" style="min-width: 300px; height:220px; max-width:300px; margin: 0 auto" data-highcharts-chart="0"></div>
        <br>
        {% endif %}
        <li><a class="btn btn-success" href="{% url 'cd-report' object.slug critical.pk %}">Reporte Final</a></li>
        <br>
        <li><a class="btn btn-secondary md-lg" href="{% url 'cd' object.slug critical.pk 1 %}">A</a></li>
        <br>
        <li><a class="btn btn-secondary" href="{% url 'cd' object.slug critical.pk 2 %}">B</a></li>
        <br>
        <li><a class="btn btn-secondary" href="{% url 'cd' object.slug critical.pk 3 %}">C</a></li>
        <br>
        <li><a class="btn btn-secondary" href="{% url 'cd' object.slug critical.pk 4 %}">D</a></li>
        <br>
        <li><a class="btn btn-secondary" href="{% url 'cd' object.slug critical.pk 5 %}">E</a></li>
        <br>
        <li><strong>Total Score: {{ critical.total_score }}</strong></li>
        {% if critical.total_score > 300 and critical.name == "CD-0" %}
        <li><strong>Your Score is too high for this Critical Decision it must be equal or less than 300</strong></li>
        {% endif %}
        {% if critical.total_score > 600 and critical.name == "CD-1" %}
        <li><strong>Your Score is too high for this Critical Decision it must be equal or less than 300</strong></li>
        {% endif %}
        {% if critical.total_score > 900 and critical.name == "CD-2" %}
        <li><strong>Your Score is too high for this Critical Decision it must be equal or less than 300</strong></li>
        {% endif %}
        {% if critical.total_score > 1000 and critical.name == "CD-3" %}
        <li><strong>Your Score is too high for this Critical Decision it must be equal or less than 300</strong></li>
        {% endif %}
      </ul>
      </td>
      {% endfor %}
    </tbody>
  </table>
  {% endif %}
</div>
</div>
{% endblock content_block%}
